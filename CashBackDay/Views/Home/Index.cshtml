@{
    var user = Context.Session.GetString("UserName");
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-7 hero-content">
                <h1 class="hero-title">
                    Hoàn tiền từ <span class="text-warning">phí giao dịch</span> Crypto
                </h1>
                <p class="hero-subtitle">
                    Kết nối với PaybackDay để nhận hoàn tiền tự động từ phí giao dịch.
                    Hỗ trợ tất cả sàn giao dịch hàng đầu Việt Nam.
                </p>
                @if (user == null)
                {
                    <div class="hero-buttons">
                        <a asp-action="Index" asp-controller="Register" class="btn btn-warning btn-lg">
                            <i class="fas fa-rocket me-2"></i>Bắt đầu ngay
                        </a>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="how-it-works-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title">Cách Thức <span class="text-warning">Hoạt Động</span></h2>
                <p class="section-subtitle fade-in">Chỉ với 3 bước đơn giản để bắt đầu nhận hoàn tiền</p>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="step-card fade-in-stagger">
                    <div class="step-icon">
                        <i class="fas fa-user-plus"></i>
                        <div class="step-number">1</div>
                    </div>
                    <h4 class="step-title">Đăng ký tài khoản</h4>
                    <p class="step-description">
                        Tạo tài khoản PaybackDay miễn phí chỉ trong vài phút.
                        Xác thực thông tin để đảm bảo bảo mật.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="step-card fade-in-stagger">
                    <div class="step-icon">
                        <i class="fas fa-link"></i>
                        <div class="step-number">2</div>
                    </div>
                    <h4 class="step-title">Kết nối sàn giao dịch</h4>
                    <p class="step-description">
                        Liên kết tài khoản giao dịch của bạn với PaybackDay.
                        Hỗ trợ tất cả sàn giao dịch lớn tại Việt Nam.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="step-card fade-in-stagger">
                    <div class="step-icon">
                        <i class="fas fa-coins"></i>
                        <div class="step-number">3</div>
                    </div>
                    <h4 class="step-title">Nhận hoàn tiền</h4>
                    <p class="step-description">
                        Giao dịch bình thường và nhận hoàn tiền tự động.
                        Tiền được chuyển về ví trong vòng 24h.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Trading Floors Section -->
<section class="trading-floors-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-3">
                <h2 class="section-title">Các Sàn Giao Dịch <span class="text-warning">Hợp Tác</span></h2>
                <p class="section-subtitle fade-in">Kết nối với các sàn giao dịch hàng đầu Việt Nam</p>
            </div>
        </div>

        <div class="row g-4">
            @foreach (var floor in ViewBag.TradingFloors)
            {
                <div class="col-lg-4 col-md-6">
                    <div class="trading-floor-card fade-in-stagger">
                        <div class="card-image">
                            <img src="@floor.ImgUrl" alt="@floor.FloorName">
                            <div class="refund-badge">Hoàn @floor.RefundPercentage.ToString("0.##")%</div>
                        </div>
                        <div class="card-content">
                            <h5 class="card-title">@floor.FloorName</h5>
                            <p class="card-subtitle">Sàn giao dịch @floor.FloorName</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="text-success fw-bold">Đã kết nối</span>
                            </div>
                        </div>
                    </div>
                </div>
            }
            <!--
                            <div class="col-lg-4 col-md-6">
                                <div class="trading-floor-card fade-in-stagger">
                                    <div class="card-image">
                                        <img src="/placeholder.svg?height=200&width=400&text=More+Coming+Soon" alt="More Coming Soon">
                                        <div class="refund-badge">Sắp có</div>
                                    </div>
                                    <div class="card-content">
                                        <h5 class="card-title">Và nhiều sàn khác</h5>
                                        <p class="card-subtitle">Chúng tôi đang mở rộng</p>
                                        <div class="text-center">
                                            <a href="contact.html" class="btn btn-outline-warning">
                                                <i class="fas fa-plus me-1"></i>Đề xuất sàn
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section id="testimonials" class="testimonials-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Khách Hàng <span class="text-warning">Nói Gì</span></h2>
            <p class="section-subtitle">Những chia sẻ chân thật từ khách hàng đang sử dụng PaybackDay</p>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img src="https://cashback.exchange/image/exchanges/binance.png" alt="Nguyễn Văn A" class="testimonial-avatar">
                        <div>
                            <h6 class="testimonial-name">Nguyễn Văn A</h6>
                            <p class="testimonial-role">Nhà đầu tư cá nhân</p>
                        </div>
                    </div>
                    <p class="testimonial-content">"Tôi đã sử dụng PaybackDay được 6 tháng và đã được hoàn lại được hơn 2 triệu đồng từ phí giao dịch. Dịch vụ rất uy tín và minh bạch."</p>
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img src="https://cashback.exchange/image/exchanges/binance.png" alt="Trần Thị B" class="testimonial-avatar">
                        <div>
                            <h6 class="testimonial-name">Trần Thị B</h6>
                            <p class="testimonial-role">Trader chuyên nghiệp</p>
                        </div>
                    </div>
                    <p class="testimonial-content">"Với khối lượng giao dịch lớn của tôi, PaybackDay giúp tôi tiết kiệm được một khoản đáng kể mỗi tháng. Rất hài lòng với dịch vụ này."</p>
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <img src="https://cashback.exchange/image/exchanges/binance.png" alt="Lê Văn C" class="testimonial-avatar">
                        <div>
                            <h6 class="testimonial-name">Lê Văn C</h6>
                            <p class="testimonial-role">Nhà đầu tư F0</p>
                        </div>
                    </div>
                    <p class="testimonial-content">"Mới bắt đầu đầu tư nhưng đã biết đến PaybackDay. Mỗi tháng được hoàn lại vài trăm nghìn hoàn tiền, tuy ít nhưng cũng vui lắm."</p>
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
@if (user == null)
{
    <section class="cta-section py-5" style="background: #0a0e1a;">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <div class="row">
                        <div class="col-12 text-center mb-2">
                            <h2 class="section-title fade-in">Sẵn sàng bắt đầu nhận <span class="text-warning">hoàn tiền?</span></h2>
                            <p class="section-subtitle fade-in">Tham gia cùng hàng nghìn nhà đầu tư thông minh đã tin tưởng PaybackDay</p>
                        </div>
                    </div>

                    <div class="hero-buttons">
                        <a asp-controller="Register" asp-action="Index" class="btn btn-warning btn-lg">
                            <i class="fas fa-rocket me-2"></i>Đăng ký miễn phí
                        </a>
                        <a asp-controller="Contact" asp-action="Index" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-phone me-2"></i>Liên hệ tư vấn
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
}

<script src="script.js"></script>
<script src="user-chat-bubble.js"></script>

<script>
    // Counter animation
    function animateCounters() {
        const counters = document.querySelectorAll('.stat-number');

        counters.forEach(counter => {
            const target = parseInt(counter.getAttribute('data-target'));
            const increment = target / 200;
            let current = 0;

            const updateCounter = () => {
                if (current < target) {
                    current += increment;
                    if (target >= 1000000000) {
                        counter.textContent = (current / 1000000000).toFixed(1) + 'B';
                    } else if (target >= 1000000) {
                        counter.textContent = (current / 1000000).toFixed(1) + 'M';
                    } else if (target >= 1000) {
                        counter.textContent = (current / 1000).toFixed(1) + 'K';
                    } else {
                        counter.textContent = Math.ceil(current);
                    }
                    requestAnimationFrame(updateCounter);
                } else {
                    if (target >= 1000000000) {
                        counter.textContent = (target / 1000000000).toFixed(1) + 'B';
                    } else if (target >= 1000000) {
                        counter.textContent = (target / 1000000).toFixed(1) + 'M';
                    } else if (target >= 1000) {
                        counter.textContent = (target / 1000).toFixed(1) + 'K';
                    } else {
                        counter.textContent = target;
                    }
                }
            };

            updateCounter();
        });
    }

    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';

                // Animate counters when stats section is visible
                if (entry.target.classList.contains('stat-item')) {
                    animateCounters();
                }
            }
        });
    }, observerOptions);

    // Observe all animated elements
    document.addEventListener('DOMContentLoaded', () => {
        const animatedElements = document.querySelectorAll('.fade-in, .fade-in-stagger, .animate-on-scroll');
        animatedElements.forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.8s ease-out';
            observer.observe(el);
        });
    });

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
        const navbar = document.querySelector('.navbar');
        if (window.scrollY > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });
</script>
